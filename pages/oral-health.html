<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Oral Health Screening</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body class="oral-page">
  <div class="container my-5 ">
    <div class="card p-4 shadow-lg border-0 rounded-4 custom-container">
      <h2 class="text-center mb-4 eyetext">Oral Health Screening Form</h2>
      <form id="oral-health-form">

       
        <div class="mb-3">
          <label for="screening-id" class="form-label" ></label>
          <input type="text" class="form-control " id="screening-id" placeholder="Screening ID" required pattern="[0-9]*" title="Screening ID must contain only numbers.">
        </div>
       
        <label class="form-check-label" for="dentalcaries">Dental Caries</label>
        <div>
          <input class="form-check-input" type="checkbox" name="dentalcaries" id="dentalcariesYes" value="yes">
          <label class="form-check-label" for="dentalcariesYes">Yes</label>
          <input class="form-check-input" type="checkbox" name="dentalcaries" id="dentalcariesNo" value="no">
          <label class="form-check-label" for="dentalcariesNo">No</label>
        </div>
       
        <div id="dentalcaries-severity" class="mt-2" style="display: none;">
          <label for="dentalcariesSeverity">Severity:</label>
          <select class="form-select" id="dentalcariesSeverity" name="dentalcariesSeverity">
            <option value="mild">Mild</option>
            <option value="moderate">Moderate</option>
            <option value="severe">Severe</option>
          </select>
        </div>
        <br>

        
        <label class="form-check-label" for="gumdisease">Gum Disease</label>
        <div>
          <input class="form-check-input" type="checkbox" name="gumdisease" id="gumdiseaseYes" value="yes">
          <label class="form-check-label" for="gumdiseaseYes">Yes</label>
          <input class="form-check-input" type="checkbox" name="inflammation" id="gumdiseaseNo" value="no">
          <label class="form-check-label" for="gumdiseaseNo">No</label>
        </div>
       
        <div id="gumdisease-severity" class="mt-2" style="display: none;">
          <label for="gumdiseaseSeverity">Severity:</label>
          <select class="form-select" id="gumdiseaseSeverity" name="gumdiseaseSeverity">
            <option value="mild">Mild</option>
            <option value="moderate">Moderate</option>
            <option value="severe">Severe</option>
          </select>
        </div>
        <br>

        <label class="form-check-label" for="thrush">Thrush Sores</label>
        <div>
          <input class="form-check-input" type="checkbox" name="thrush" id="thrushYes" value="yes">
          <label class="form-check-label" for="thrushYes">Yes</label>
          <input class="form-check-input" type="checkbox" name="thrush" id="thrushNo" value="no">
          <label class="form-check-label" for="thrushNo">No</label>
        </div>
        
        <div id="thrush-severity" class="mt-2" style="display: none;">
          <label for="thrushSeverity">Severity:</label>
          <select class="form-select" id="thrushSeverity" name="squintSeverity">
            <option value="mild">Mild</option>
            <option value="moderate">Moderate</option>
            <option value="severe">Severe</option>
          </select>
        </div>
        <br>
        <label class="form-check-label" for="teethStaining">Teeth Staining</label>
        <div>
          <input class="form-check-input" type="checkbox" name="teethStaining" id="teethStainingYes" value="yes">
          <label class="form-check-label" for="otherAbnormalityYes">Yes</label>
          <input class="form-check-input" type="checkbox" name="teethStaining" id="teethStainingNo" value="no">
          <label class="form-check-label" for="otherAbnormalityNo">No</label>
        </div>


        <div id="teeth-staining" class="mt-2" style="display: none;">
          <label for="teethStainingAbnormality">Severity:</label>
          <select class="form-select" id="teethStainingAbnormality" name="teethStainingAbnormality">
            <option value="mild">Mild</option>
            <option value="moderate">Moderate</option>
            <option value="severe">Severe</option>
          </select>
        </div>
        <br>
        
        <label class="form-check-label" for="otherAbnormality">Other Abnormality</label>
        <div>
          <input class="form-check-input" type="checkbox" name="otherAbnormality" id="otherAbnormalityYes" value="yes">
          <label class="form-check-label" for="otherAbnormalityYes">Yes</label>
          <input class="form-check-input" type="checkbox" name="otherAbnormality" id="otherAbnormalityNo" value="no">
          <label class="form-check-label" for="otherAbnormalityNo">No</label>
        </div>
        
        <div id="otherAbnormality-severity" class="mt-2" style="display: none;">
          <label for="otherAbnormalitySeverity">Severity:</label>
          <select class="form-select" id="otherAbnormalitySeverity" name="otherAbnormalitySeverity">
            <option value="mild">Mild</option>
            <option value="moderate">Moderate</option>
            <option value="severe">Severe</option>
          </select>
        </div>
        
        <br>
        <br>
        <div class="mb-3">
          <label for="exampleFormControlTextarea1" class="form-label">Additional Comments:</label>
          <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
        </div>

       
        <div class="d-flex justify-content-between">
          <button type="submit" class="btn btn-primary">Submit</button>
          <button type="button" class="btn btn-primary" id="home-btn">Home</button>
        </div>
      </form>
    </div>
  </div>
<script>
  document.getElementById('oral-health-form').addEventListener('submit', function(event) {
  const checkboxGroups = [
    'dentalcaries',
    'gumdisease',
    'thrush',
    'otherAbnormality',
    'teethStaining'
  ];

  let allChecked = true;

  // Loop through each group and check if a checkbox is selected
  checkboxGroups.forEach(group => {
    const checkboxes = document.querySelectorAll(`input[name="${group}"]`);
    const isChecked = Array.from(checkboxes).some(checkbox => checkbox.checked);
    
    // Show error if no checkbox is selected in a group
    if (!isChecked) {
      allChecked = false;
      showError(group);  // Show error message for the group
    } else {
      hideError(group);  // Hide error message if a checkbox is selected
    }
  });

  // Prevent form submission if any group is not checked
  if (!allChecked) {
    event.preventDefault();
    alert('Please select Yes or No for each group.');
  } else {
    // Show success alert
    event.preventDefault(); // Prevent form submission for demo purposes
    showSuccessAlert();
  }
});

/// Function to show error message for a checkbox group
function showError(group) {
  let errorElement = document.getElementById(`${group}-error`);
  if (!errorElement) {
    errorElement = document.createElement('span');
    errorElement.id = `${group}-error`;
    errorElement.className = 'text-danger';
    errorElement.textContent = 'Please select an option.';
    
    // Find the checkbox container and append the error next to the checkboxes
    const checkboxes = document.querySelectorAll(`input[name="${group}"]`);
    checkboxes[0].parentNode.appendChild(errorElement);  // Append error next to the first checkbox in the group
  }
}


// Function to hide error message for a checkbox group
function hideError(group) {
  const errorElement = document.getElementById(`${group}-error`);
  if (errorElement) {
    errorElement.remove();  // Remove error message if checkbox is selected
  }
}

// Function to show success alert
function showSuccessAlert() {
  alert("Data captured successfully. Click OK to finish.");
}

// Add event listeners to show/hide severity based on selections
const checkboxGroupsWithSeverity = {
  dentalcaries: 'dentalcaries-severity',
  gumdisease: 'gumdisease-severity',
  thrush: 'thrush-severity',
  otherAbnormality: 'otherAbnormality-severity',
  teethStaining: 'teeth-staining'
};

Object.keys(checkboxGroupsWithSeverity).forEach(group => {
  const yesCheckbox = document.getElementById(`${group}Yes`);
  const noCheckbox = document.getElementById(`${group}No`);
  const severityElement = document.getElementById(checkboxGroupsWithSeverity[group]);

  // Show severity dropdown if "Yes" is selected
  yesCheckbox.addEventListener('change', function() {
    if (this.checked) {
      severityElement.style.display = 'block';
    }
  });

  // Hide severity dropdown if "No" is selected
  noCheckbox.addEventListener('change', function() {
    if (this.checked) {
      severityElement.style.display = 'none';
    }
  });
});
</script>
</body>
</html>
