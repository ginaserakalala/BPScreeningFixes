<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ear Screening</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body class="ears-page">
  <div class="container my-5 ">
    <div class="card p-4 shadow-lg border-0 rounded-4 custom-container">
      <h2 class="text-center mb-4 eyetext">Ears Screening Form</h2>
      <form id="ears-form" >

        <div class="mb-3">
          <label for="screening-id" class="form-label" ></label>
          <input type="text" class="form-control " id="screening-id" placeholder="Screening ID" required pattern="[0-9]*" title="Screening ID must contain only numbers.">
        </div>


        <label class="form-check-label" for="dischargeLeft">Discharge Left</label>
        <div>
          <input class="form-check-input" type="checkbox" name="dischargeLeft" id="dischargeLeftYes" value="yes">
          <label class="form-check-label" for="dischargeYes">Yes</label>
          <input class="form-check-input" type="checkbox" name="dischargeLeft" id="dischargeLeftNo" value="no">
          <label class="form-check-label" for="dischargeLeftNo">No</label>
        </div>



        <div id="dischargeLeft-severity" class="mt-2" style="display: none;">
          <label for="dischargeLeftSeverity">Severity:</label>
          <select class="form-select" id="dischargeLeftSeverity" name="dischargeLeftSeverity">
            <option value="mild">Mild</option>
            <option value="moderate">Moderate</option>
            <option value="severe">Severe</option>
          </select>
        </div>
        <br>

        <label class="form-check-label" for="dischargeRight">Discharge Right</label>
        <div>
          <input class="form-check-input" type="checkbox" name="dischargeRight" id="dischargeRightYes" value="yes">
          <label class="form-check-label" for="dischargeYes">Yes</label>
          <input class="form-check-input" type="checkbox" name="dischargeRight" id="dischargeRightNo" value="no">
          <label class="form-check-label" for="dischargeRightNo">No</label>
        </div>



        <div id="dischargeRight-severity" class="mt-2" style="display: none;">
          <label for="dischargeRightSeverity">Severity:</label>
          <select class="form-select" id="dischargeRightSeverity" name="dischargeRightSeverity">
            <option value="mild">Mild</option>
            <option value="moderate">Moderate</option>
            <option value="severe">Severe</option>
          </select>
        </div>


        <label class="form-check-label" for="inflammationLeft">Wax Impaction Left</label>
        <div>
          <input class="form-check-input" type="checkbox" name="inflammationLeft" id="inflammationLeftYes" value="yes">
          <label class="form-check-label" for="inflammationLeftYes">Yes</label>
          <input class="form-check-input" type="checkbox" name="inflammationLeft" id="inflammationLeftNo" value="no">
          <label class="form-check-label" for="inflammationLeftNo">No</label>
        </div>

        <div id="inflammationLeft-severity" class="mt-2" style="display: none;">
          <label for="inflammationLeftSeverity">Severity:</label>
          <select class="form-select" id="inflammationLeftSeverity" name="inflammationLeftSeverity">
            <option value="mild">Mild</option>
            <option value="moderate">Moderate</option>
            <option value="severe">Severe</option>
          </select>
        </div>
        <br>

        <label class="form-check-label" for="inflammationRight">Wax Impaction Right</label>
        <div>
          <input class="form-check-input" type="checkbox" name="inflammationRight" id="inflammationRightYes" value="yes">
          <label class="form-check-label" for="inflammationRightYes">Yes</label>
          <input class="form-check-input" type="checkbox" name="inflammationRight" id="inflammationRightNo" value="no">
          <label class="form-check-label" for="inflammationRightNo">No</label>
        </div>

        <div id="inflammationRight-severity" class="mt-2" style="display: none;">
          <label for="inflammationRightSeverity">Severity:</label>
          <select class="form-select" id="inflammationRightSeverity" name="inflammationRightSeverity">
            <option value="mild">Mild</option>
            <option value="moderate">Moderate</option>
            <option value="severe">Severe</option>
          </select>
        </div>
        <br>


        <label class="form-check-label" for="inflamedLeft">Inflamed Eardrum Left</label>
        <div>
          <input class="form-check-input" type="checkbox" name="inflamedLeft" id="inflamedLeftYes" value="yes">
          <label class="form-check-label" for="inflamedLeftYes">Yes</label>
          <input class="form-check-input" type="checkbox" name="inflamedLeft" id="inflamedLeftNo" value="no">
          <label class="form-check-label" for="squintNo">No</label>
        </div>

        <div id="inflamedLeft-severity" class="mt-2" style="display: none;">
          <label for="inflamedLeftSeverity">Severity:</label>
          <select class="form-select" id="inflamedLeftSeverity" name="inflamedLeftSeverity">
            <option value="mild">Mild</option>
            <option value="moderate">Moderate</option>
            <option value="severe">Severe</option>
          </select>
        </div>
        <br>

        <label class="form-check-label" for="inflamedRight">Inflamed Eardrum Right</label>
        <div>
          <input class="form-check-input" type="checkbox" name="inflamedRight" id="inflamedRightYes" value="yes">
          <label class="form-check-label" for="inflamedRightYes">Yes</label>
          <input class="form-check-input" type="checkbox" name="inflamedRight" id="inflamedRightNo" value="no">
          <label class="form-check-label" for="inflamedRightNo">No</label>
        </div>

        <div id="inflamedRight-severity" class="mt-2" style="display: none;">
          <label for="inflamedRightSeverity">Severity:</label>
          <select class="form-select" id="inflamedRightSeverity" name="inflamedRightSeverity">
            <option value="mild">Mild</option>
            <option value="moderate">Moderate</option>
            <option value="severe">Severe</option>
          </select>
        </div>
        <br>

        <label class="form-check-label" for="otherAbnormalityLeft">Other Abnormality Left</label>
        <div>
          <input class="form-check-input" type="checkbox" name="otherAbnormalityLeft" id="otherAbnormalityLeftYes" value="yes">
          <label class="form-check-label" for="otherAbnormalityLeftYes">Yes</label>
          <input class="form-check-input" type="checkbox" name="otherAbnormalityLeft" id="otherAbnormalityLeftNo" value="no">
          <label class="form-check-label" for="otherAbnormalityLeftNo">No</label>
        </div>

        <div id="otherAbnormalityLeft-severity" class="mt-2" style="display: none;">
          <label for="otherAbnormalityLeftSeverity">Severity:</label>
          <select class="form-select" id="otherAbnormalityLeftSeverity" name="otherAbnormalityLeftSeverity">
            <option value="mild">Mild</option>
            <option value="moderate">Moderate</option>
            <option value="severe">Severe</option>
          </select>
        </div>
        <br>

        <label class="form-check-label" for="otherAbnormalityRight">Other Abnormality Right</label>
        <div>
          <input class="form-check-input" type="checkbox" name="otherAbnormalityRight" id="otherAbnormalityRightYes" value="yes">
          <label class="form-check-label" for="otherAbnormalityRightYes">Yes</label>
          <input class="form-check-input" type="checkbox" name="otherAbnormalityRight" id="otherAbnormalityRightNo" value="no">
          <label class="form-check-label" for="otherAbnormalityRightNo">No</label>
        </div>

        <div id="otherAbnormalityRight-severity" class="mt-2" style="display: none;">
          <label for="otherAbnormalityRightSeverity">Severity:</label>
          <select class="form-select" id="otherAbnormalityRightSeverity" name="otherAbnormalityRightSeverity">
            <option value="mild">Mild</option>
            <option value="moderate">Moderate</option>
            <option value="severe">Severe</option>
          </select>
        </div>
        <br>
         <label class="form-check-label" for="wearsHearingAid">Wears Hearing Aid</label>
        <div>
          <input class="form-check-input" type="checkbox" name="wearsHearingAid" id="wearsHearingAidYes" value="yes">
          <label class="form-check-label" for="wearsHearingAidYes">Yes</label>
          <input class="form-check-input" type="checkbox" name="wearsHearingAid" id="wearsHearingAidNo" value="no">
          <label class="form-check-label" for="wearsHearingAidNo">No</label>
        </div>

          <br>
          <br>

        <div class="mb-3">
          <label for="exampleFormControlTextarea1" class="form-label">Additional Comments:</label>
          <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
        </div>


        <div class="d-flex justify-content-between">
          <button type="submit" class="btn btn-primary">Submit</button>
          <button type="button" class="btn btn-primary" id="home-btn">Home</button>
        </div>
      </form>
    </div>
  </div>
  <script>document.getElementById('ears-form').addEventListener('submit', function (event) {
    const checkboxGroups = [
      'dischargeLeft',
      'dischargeRight',
      'inflammationLeft',
      'inflammationRight',
      'inflamedLeft',
      'inflamedRight',
      'otherAbnormalityLeft',
      'otherAbnormalityRight',
      'wearsHearingAid',
    ];
  
    let allChecked = true;
  
    // Loop through each group and validate
    checkboxGroups.forEach(group => {
      const checkboxes = document.querySelectorAll(`input[name="${group}"]`);
      const isChecked = Array.from(checkboxes).some(checkbox => checkbox.checked);
  
      if (!isChecked) {
        allChecked = false;
        showError(group);
      } else {
        hideError(group);
      }
    });
  
    // Prevent form submission if any group is invalid
    if (!allChecked) {
      event.preventDefault();
      alert('Please select Yes or No for each group.');
    } else {
      alert('Form submitted successfully.');
    }
  });
  
  // Function to show error message for a checkbox group
  function showError(group) {
    let errorElement = document.getElementById(`${group}-error`);
    if (!errorElement) {
      errorElement = document.createElement('span');
      errorElement.id = `${group}-error`;
      errorElement.className = 'text-danger';
      errorElement.textContent = 'Please select an option.';
      const checkboxes = document.querySelectorAll(`input[name="${group}"]`);
      checkboxes[0].parentNode.appendChild(errorElement);
    }
  }
  
  // Function to hide error message for a checkbox group
  function hideError(group) {
    const errorElement = document.getElementById(`${group}-error`);
    if (errorElement) {
      errorElement.remove();
    }
  }
  
  // Dynamically toggle severity dropdowns
  const checkboxGroupsWithSeverity = {
    dischargeLeft: 'dischargeLeft-severity',
    dischargeRight: 'dischargeRight-severity',
    inflammationLeft: 'inflammationLeft-severity',
    inflammationRight: 'inflammationRight-severity',
    inflamedLeft: 'inflamedLeft-severity',
    inflamedRight: 'inflamedRight-severity',
    otherAbnormalityLeft: 'otherAbnormalityLeft-severity',
    otherAbnormalityRight: 'otherAbnormalityRight-severity',
  };
  
  Object.keys(checkboxGroupsWithSeverity).forEach(group => {
    const yesCheckbox = document.getElementById(`${group}Yes`);
    const noCheckbox = document.getElementById(`${group}No`);
    const severityElement = document.getElementById(checkboxGroupsWithSeverity[group]);
  
    // Show severity dropdown if "Yes" is selected
    yesCheckbox.addEventListener('change', function () {
      if (this.checked) {
        severityElement.style.display = 'block';
      }
    });
  
    // Hide severity dropdown if "No" is selected
    noCheckbox.addEventListener('change', function () {
      if (this.checked) {
        severityElement.style.display = 'none';
      }
    });
  });
  </script>
</body>
</html>
